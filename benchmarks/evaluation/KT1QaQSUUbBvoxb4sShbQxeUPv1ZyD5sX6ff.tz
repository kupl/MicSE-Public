parameter (or
            (or
              (or
                (or
                  (pair %add_avatar (pair (string %description) (string %image_url))
                                    (pair (string %name) (nat %price)))
                  (pair %add_country (string %description) (string %name)))
                (or
                  (pair %add_equipment (pair (string %bonus_country) (string %description))
                                       (pair (string %name) (pair (nat %power_bonus) (nat %price))))
                  (unit %cancel_avatar_sale)))
              (or
                (or
                  (pair %change_defaults
                    (pair (address %new_dex_address) (int %new_power_up_time_limit))
                    (pair (address %new_token_address) (nat %new_token_bonus_divider)))
                  (address %change_manager))
                (or (string %create_or_reset_gladiator)
                    (or (string %fight)
                        (pair %manager_override_nickname (address %address) (string %new_nickname))))))
            (or
              (or
                (or (pair %manager_transfer_avatar (nat %avatar_id) (address %target_address))
                    (nat %new_avatar_sale))
                (or (unit %power_up) (or (nat %purchase_avatar) (string %purchase_equipment))))
              (or (or (string %self_update_nickname) (bytes %set_metadata))
                  (or (address %transfer_avatar)
                      (or
                        (list %updateAvailableFunds (pair
                                                     (pair %request (address %owner) (nat %token_id))
                                                     (nat %balance)))
                        (unit %withdraw))))));
storage (pair
          (pair
            (pair (big_map %avatar_sales nat (pair (mutez %price) (address %seller)))
                  (pair
                    (big_map %avatars nat
                                      (pair (pair (address %current_owner) (string %description))
                                            (pair (string %image_url) (string %name))))
                    (big_map %countries string
                                        (pair (address %champion)
                                              (pair (string %description) (string %name))))))
            (pair (nat %current_avatar_id)
                  (pair (address %dex_address)
                        (big_map %equipment string
                                            (pair
                                              (pair (string %bonus_country) (string %description))
                                              (pair (string %name)
                                                    (pair (nat %power_bonus) (mutez %price))))))))
          (pair
            (pair
              (big_map %gladiators address
                                   (pair
                                     (pair (pair (nat %avatar_id) (string %equipment))
                                           (pair (timestamp %last_power_up) (nat %losses)))
                                     (pair (pair (string %nickname) (nat %strength))
                                           (pair (nat %ties) (nat %wins)))))
              (pair (address %manager) (big_map %metadata string bytes)))
            (pair (pair (int %power_up_time_limit) (address %token_address))
                  (pair (nat %token_bonus_divider) (big_map %user_token_balances address nat)))));
code { UNPAIR ;
       IF_LEFT
         { IF_LEFT
             { IF_LEFT
                 { IF_LEFT
                     { SENDER ;
                       DUP 3 ;
                       GET 3 ;
                       GET 3 ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Error: non manager call" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       PUSH nat 1 ;
                       ADD ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       DIG 5 ;
                       DUP ;
                       GET 3 ;
                       SWAP ;
                       DUP ;
                       DUG 7 ;
                       CAR ;
                       CDR ;
                       PAIR ;
                       DUP 7 ;
                       CAR ;
                       CAR ;
                       DUP 9 ;
                       GET 3 ;
                       GET 3 ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       DIG 7 ;
                       CAR ;
                       GET 3 ;
                       UPDATE ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       PAIR ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       DUP 6 ;
                       GET 3 ;
                       GET 3 ;
                       PUSH mutez 1000000 ;
                       DIG 6 ;
                       GET 4 ;
                       MUL ;
                       PAIR ;
                       SOME ;
                       DIG 5 ;
                       CAR ;
                       GET 3 ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       PAIR }
                     { SENDER ;
                       DUP 3 ;
                       GET 3 ;
                       GET 3 ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Error: non manager call" ; FAILWITH } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       DIG 5 ;
                       DUP ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 7 ;
                       CAR ;
                       DIG 8 ;
                       GET 3 ;
                       GET 3 ;
                       PAIR 3 ;
                       SOME ;
                       DIG 6 ;
                       CDR ;
                       UPDATE ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       PAIR } }
                 { IF_LEFT
                     { SENDER ;
                       DUP 3 ;
                       GET 3 ;
                       GET 3 ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Error: non manager call" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       PUSH mutez 1000000 ;
                       DUP 7 ;
                       GET 6 ;
                       MUL ;
                       DUP 7 ;
                       GET 5 ;
                       PAIR ;
                       DUP 7 ;
                       GET 3 ;
                       PAIR ;
                       DIG 6 ;
                       DUP ;
                       CAR ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 8 ;
                       CAR ;
                       CAR ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       DIG 6 ;
                       GET 3 ;
                       UPDATE ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR }
                     { DROP ;
                       DUP ;
                       GET 3 ;
                       CAR ;
                       PUSH nat 0 ;
                       SWAP ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 126 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       COMPARE ;
                       NEQ ;
                       IF {} { PUSH string "You don't own an avatar!" ; FAILWITH } ;
                       DUP ;
                       CAR ;
                       CAR ;
                       CAR ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 126 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       MEM ;
                       IF {} { PUSH string "You have no pending avatar sale!" ; FAILWITH } ;
                       DUP ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       NONE (pair mutez address) ;
                       DIG 5 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 126 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       PAIR } } ;
               NIL operation }
             { IF_LEFT
                 { IF_LEFT
                     { SENDER ;
                       DUP 3 ;
                       GET 3 ;
                       GET 3 ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Error: non manager call" ; FAILWITH } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       GET 5 ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CAR ;
                       COMPARE ;
                       NEQ ;
                       IF
                         { SWAP ;
                           UNPAIR ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           SWAP ;
                           CDR ;
                           DUP 5 ;
                           CAR ;
                           CAR ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           SWAP }
                         {} ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 5 ;
                       CDR ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 3 ;
                       COMPARE ;
                       NEQ ;
                       IF
                         { SWAP ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           CAR ;
                           DUP 5 ;
                           GET 3 ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           SWAP }
                         {} ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 7 ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 4 ;
                       COMPARE ;
                       NEQ ;
                       IF { DUP ; DUG 2 ; GET 4 ; UPDATE 7 ; SWAP } {} ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 5 ;
                       CAR ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       CAR ;
                       CDR ;
                       COMPARE ;
                       NEQ ;
                       IF
                         { SWAP ; UNPAIR ; SWAP ; UNPAIR ; SWAP ; UNPAIR ; CDR ; DIG 4 ; CAR ; CDR ; PAIR ; PAIR ; SWAP ; PAIR ; SWAP ; PAIR }
                         { DROP } }
                     { SENDER ;
                       DUP 3 ;
                       GET 3 ;
                       GET 3 ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Error: non manager call" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       CDR ;
                       DIG 4 ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR } ;
                   NIL operation }
                 { IF_LEFT
                     { SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       PUSH (pair nat nat) (Pair 0 0) ;
                       PUSH nat 1 ;
                       DIG 6 ;
                       PAIR ;
                       PAIR ;
                       PUSH (pair (pair nat string) (pair timestamp nat)) (Pair (Pair 0 "None") (Pair "2021-01-01T00:00:00Z" 0)) ;
                       PAIR ;
                       SOME ;
                       SENDER ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       DUP ;
                       GET 8 ;
                       PUSH (option nat) (Some 0) ;
                       SENDER ;
                       UPDATE ;
                       UPDATE 8 ;
                       NIL operation }
                     { IF_LEFT
                         { SWAP ;
                           DUP ;
                           DUG 2 ;
                           CAR ;
                           CAR ;
                           GET 4 ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           MEM ;
                           IF {} { PUSH string "Please enter a valid country!" ; FAILWITH } ;
                           SENDER ;
                           DUP 3 ;
                           CAR ;
                           CAR ;
                           GET 4 ;
                           DUP 3 ;
                           GET ;
                           IF_NONE { PUSH int 223 ; FAILWITH } {} ;
                           CAR ;
                           COMPARE ;
                           NEQ ;
                           IF {} { PUSH string "You cannot fight yourself!" ; FAILWITH } ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           GET 3 ;
                           CAR ;
                           SENDER ;
                           MEM ;
                           IF {} { PUSH string "You must create a gladiator first!" ; FAILWITH } ;
                           NIL operation ;
                           DUP 3 ;
                           GET 5 ;
                           CDR ;
                           CONTRACT %balance_of (pair (list (pair address nat))
                                                      (contract (list (pair (pair address nat) nat)))) ;
                           IF_NONE { PUSH string "InvalidTokenInterface" ; FAILWITH } {} ;
                           PUSH mutez 0 ;
                           SELF %updateAvailableFunds ;
                           NIL (pair address nat) ;
                           PUSH nat 0 ;
                           SENDER ;
                           PAIR ;
                           CONS ;
                           PAIR ;
                           TRANSFER_TOKENS ;
                           CONS ;
                           PUSH string "None" ;
                           DIG 3 ;
                           DUP ;
                           GET 3 ;
                           CAR ;
                           SWAP ;
                           DUP ;
                           DUG 5 ;
                           CAR ;
                           CAR ;
                           GET 4 ;
                           DUP 5 ;
                           GET ;
                           IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                           CAR ;
                           GET ;
                           IF_NONE { PUSH int 234 ; FAILWITH } {} ;
                           CAR ;
                           CAR ;
                           CDR ;
                           COMPARE ;
                           EQ ;
                           IF
                             { PUSH nat 0 }
                             { SWAP ;
                               DUP ;
                               DUG 2 ;
                               DIG 3 ;
                               DUP ;
                               CAR ;
                               GET 6 ;
                               SWAP ;
                               DUP ;
                               GET 3 ;
                               CAR ;
                               SWAP ;
                               DUP ;
                               DUG 6 ;
                               CAR ;
                               CAR ;
                               GET 4 ;
                               DUP 6 ;
                               GET ;
                               IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                               CAR ;
                               GET ;
                               IF_NONE { PUSH int 234 ; FAILWITH } {} ;
                               CAR ;
                               CAR ;
                               CDR ;
                               GET ;
                               IF_NONE { PUSH int 239 ; FAILWITH } {} ;
                               CAR ;
                               CAR ;
                               COMPARE ;
                               EQ ;
                               IF
                                 { DIG 2 ;
                                   DUP ;
                                   CAR ;
                                   GET 6 ;
                                   SWAP ;
                                   DUP ;
                                   GET 3 ;
                                   CAR ;
                                   SWAP ;
                                   DUP ;
                                   DUG 5 ;
                                   CAR ;
                                   CAR ;
                                   GET 4 ;
                                   DUP 5 ;
                                   GET ;
                                   IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                                   CAR ;
                                   GET ;
                                   IF_NONE { PUSH int 234 ; FAILWITH } {} ;
                                   CAR ;
                                   CAR ;
                                   CDR ;
                                   GET ;
                                   IF_NONE { PUSH int 240 ; FAILWITH } {} ;
                                   GET 5 }
                                 { PUSH nat 0 } } ;
                           PUSH string "None" ;
                           DUP 5 ;
                           GET 3 ;
                           CAR ;
                           SENDER ;
                           GET ;
                           IF_NONE { PUSH int 245 ; FAILWITH } {} ;
                           CAR ;
                           CAR ;
                           CDR ;
                           COMPARE ;
                           EQ ;
                           IF
                             { PUSH nat 0 }
                             { DUP 3 ;
                               DIG 4 ;
                               DUP ;
                               CAR ;
                               GET 6 ;
                               SWAP ;
                               DUP ;
                               DUG 6 ;
                               GET 3 ;
                               CAR ;
                               SENDER ;
                               GET ;
                               IF_NONE { PUSH int 245 ; FAILWITH } {} ;
                               CAR ;
                               CAR ;
                               CDR ;
                               GET ;
                               IF_NONE { PUSH int 250 ; FAILWITH } {} ;
                               CAR ;
                               CAR ;
                               COMPARE ;
                               EQ ;
                               IF
                                 { DIG 3 ;
                                   DUP ;
                                   CAR ;
                                   GET 6 ;
                                   SWAP ;
                                   DUP ;
                                   DUG 5 ;
                                   GET 3 ;
                                   CAR ;
                                   SENDER ;
                                   GET ;
                                   IF_NONE { PUSH int 245 ; FAILWITH } {} ;
                                   CAR ;
                                   CAR ;
                                   CDR ;
                                   GET ;
                                   IF_NONE { PUSH int 251 ; FAILWITH } {} ;
                                   GET 5 }
                                 { PUSH nat 0 } } ;
                           DUP ;
                           DIG 5 ;
                           DUP ;
                           GET 7 ;
                           SWAP ;
                           DUP ;
                           DUG 7 ;
                           GET 8 ;
                           SENDER ;
                           GET ;
                           IF_NONE { PUSH int 256 ; FAILWITH } {} ;
                           EDIV ;
                           IF_NONE { PUSH int 256 ; FAILWITH } { CAR } ;
                           DUP 7 ;
                           GET 3 ;
                           CAR ;
                           SENDER ;
                           GET ;
                           IF_NONE { PUSH int 256 ; FAILWITH } {} ;
                           GET 3 ;
                           CDR ;
                           ADD ;
                           ADD ;
                           DUP 3 ;
                           DIG 6 ;
                           DUP ;
                           GET 7 ;
                           SWAP ;
                           DUP ;
                           GET 8 ;
                           SWAP ;
                           DUP ;
                           DUG 9 ;
                           CAR ;
                           CAR ;
                           GET 4 ;
                           DUP 9 ;
                           GET ;
                           IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                           CAR ;
                           GET ;
                           IF_NONE { PUSH int 255 ; FAILWITH } {} ;
                           EDIV ;
                           IF_NONE { PUSH int 255 ; FAILWITH } { CAR } ;
                           DIG 7 ;
                           DUP ;
                           GET 3 ;
                           CAR ;
                           SWAP ;
                           DUP ;
                           DUG 9 ;
                           CAR ;
                           CAR ;
                           GET 4 ;
                           DUP 9 ;
                           GET ;
                           IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                           CAR ;
                           GET ;
                           IF_NONE { PUSH int 255 ; FAILWITH } {} ;
                           GET 3 ;
                           CDR ;
                           ADD ;
                           ADD ;
                           COMPARE ;
                           LT ;
                           IF
                             { DROP 2 ;
                               DUP 3 ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               UNPAIR ;
                               DUP ;
                               DIG 7 ;
                               CAR ;
                               CAR ;
                               GET 4 ;
                               DUP 8 ;
                               GET ;
                               IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                               CAR ;
                               DUP ;
                               DUG 2 ;
                               GET ;
                               IF_NONE { PUSH int 259 ; FAILWITH } {} ;
                               UNPAIR ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               PUSH nat 1 ;
                               ADD ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SOME ;
                               SWAP ;
                               UPDATE ;
                               PAIR ;
                               PAIR ;
                               SWAP ;
                               UNPAIR ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               SWAP ;
                               DUP ;
                               DIG 7 ;
                               DUP ;
                               DUG 2 ;
                               GET ;
                               IF_NONE { PUSH int 260 ; FAILWITH } {} ;
                               SENDER ;
                               UPDATE 1 ;
                               SOME ;
                               SWAP ;
                               UPDATE ;
                               SWAP ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SWAP ;
                               UNPAIR ;
                               UNPAIR ;
                               DUP ;
                               SENDER ;
                               DUP ;
                               DUG 2 ;
                               GET ;
                               IF_NONE { PUSH int 261 ; FAILWITH } {} ;
                               DUP ;
                               GET 6 ;
                               PUSH nat 1 ;
                               ADD ;
                               UPDATE 6 ;
                               SOME ;
                               SWAP ;
                               UPDATE ;
                               DUP ;
                               SENDER ;
                               DUP ;
                               DUG 2 ;
                               GET ;
                               IF_NONE { PUSH int 262 ; FAILWITH } {} ;
                               UNPAIR ;
                               SWAP ;
                               UNPAIR ;
                               UNPAIR ;
                               SWAP ;
                               PUSH nat 1 ;
                               ADD ;
                               SWAP ;
                               PAIR ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SOME ;
                               SWAP ;
                               UPDATE ;
                               PAIR ;
                               PAIR ;
                               SWAP ;
                               PAIR ;
                               SWAP }
                             { DIG 4 ;
                               DUP ;
                               GET 7 ;
                               SWAP ;
                               DUP ;
                               DUG 6 ;
                               GET 8 ;
                               SENDER ;
                               GET ;
                               IF_NONE { PUSH int 256 ; FAILWITH } {} ;
                               EDIV ;
                               IF_NONE { PUSH int 256 ; FAILWITH } { CAR } ;
                               DUP 6 ;
                               GET 3 ;
                               CAR ;
                               SENDER ;
                               GET ;
                               IF_NONE { PUSH int 256 ; FAILWITH } {} ;
                               GET 3 ;
                               CDR ;
                               ADD ;
                               ADD ;
                               SWAP ;
                               DIG 4 ;
                               DUP ;
                               GET 7 ;
                               SWAP ;
                               DUP ;
                               GET 8 ;
                               SWAP ;
                               DUP ;
                               DUG 7 ;
                               CAR ;
                               CAR ;
                               GET 4 ;
                               DUP 7 ;
                               GET ;
                               IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                               CAR ;
                               GET ;
                               IF_NONE { PUSH int 255 ; FAILWITH } {} ;
                               EDIV ;
                               IF_NONE { PUSH int 255 ; FAILWITH } { CAR } ;
                               DIG 5 ;
                               DUP ;
                               GET 3 ;
                               CAR ;
                               SWAP ;
                               DUP ;
                               DUG 7 ;
                               CAR ;
                               CAR ;
                               GET 4 ;
                               DUP 7 ;
                               GET ;
                               IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                               CAR ;
                               GET ;
                               IF_NONE { PUSH int 255 ; FAILWITH } {} ;
                               GET 3 ;
                               CDR ;
                               ADD ;
                               ADD ;
                               COMPARE ;
                               EQ ;
                               IF
                                 { DIG 2 ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   UNPAIR ;
                                   DUP ;
                                   SENDER ;
                                   DUP ;
                                   DUG 2 ;
                                   GET ;
                                   IF_NONE { PUSH int 265 ; FAILWITH } {} ;
                                   DUP ;
                                   GET 5 ;
                                   PUSH nat 1 ;
                                   ADD ;
                                   UPDATE 5 ;
                                   SOME ;
                                   SWAP ;
                                   UPDATE ;
                                   PAIR ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   DUP ;
                                   DUG 3 ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   UNPAIR ;
                                   DUP ;
                                   DIG 7 ;
                                   CAR ;
                                   CAR ;
                                   GET 4 ;
                                   DIG 7 ;
                                   GET ;
                                   IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                                   CAR ;
                                   DUP ;
                                   DUG 2 ;
                                   GET ;
                                   IF_NONE { PUSH int 266 ; FAILWITH } {} ;
                                   DUP ;
                                   GET 5 ;
                                   PUSH nat 1 ;
                                   ADD ;
                                   UPDATE 5 ;
                                   SOME ;
                                   SWAP ;
                                   UPDATE ;
                                   PAIR ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   SWAP }
                                 { DIG 2 ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   UNPAIR ;
                                   DUP ;
                                   SENDER ;
                                   DUP ;
                                   DUG 2 ;
                                   GET ;
                                   IF_NONE { PUSH int 268 ; FAILWITH } {} ;
                                   UNPAIR ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   SWAP ;
                                   PUSH nat 1 ;
                                   ADD ;
                                   SWAP ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   PAIR ;
                                   SOME ;
                                   SWAP ;
                                   UPDATE ;
                                   PAIR ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   DUP ;
                                   DUG 3 ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   UNPAIR ;
                                   DUP ;
                                   DIG 7 ;
                                   CAR ;
                                   CAR ;
                                   GET 4 ;
                                   DUP 8 ;
                                   GET ;
                                   IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                                   CAR ;
                                   DUP ;
                                   DUG 2 ;
                                   GET ;
                                   IF_NONE { PUSH int 269 ; FAILWITH } {} ;
                                   DUP ;
                                   GET 6 ;
                                   PUSH nat 1 ;
                                   ADD ;
                                   UPDATE 6 ;
                                   SOME ;
                                   SWAP ;
                                   UPDATE ;
                                   PAIR ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   DUP ;
                                   DUG 3 ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   UNPAIR ;
                                   DUP ;
                                   DIG 7 ;
                                   CAR ;
                                   CAR ;
                                   GET 4 ;
                                   DIG 7 ;
                                   GET ;
                                   IF_NONE { PUSH int 233 ; FAILWITH } {} ;
                                   CAR ;
                                   DUP ;
                                   DUG 2 ;
                                   GET ;
                                   IF_NONE { PUSH int 270 ; FAILWITH } {} ;
                                   UNPAIR ;
                                   SWAP ;
                                   UNPAIR ;
                                   UNPAIR ;
                                   SWAP ;
                                   PUSH nat 1 ;
                                   ADD ;
                                   SWAP ;
                                   PAIR ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   SOME ;
                                   SWAP ;
                                   UPDATE ;
                                   PAIR ;
                                   PAIR ;
                                   SWAP ;
                                   PAIR ;
                                   SWAP } } }
                         { SENDER ;
                           DUP 3 ;
                           GET 3 ;
                           GET 3 ;
                           COMPARE ;
                           EQ ;
                           IF {} { PUSH string "Error: non manager call" ; FAILWITH } ;
                           SWAP ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           UNPAIR ;
                           DUP ;
                           DUP 6 ;
                           CAR ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 47 ; FAILWITH } {} ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           CDR ;
                           DIG 8 ;
                           CDR ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           SOME ;
                           SWAP ;
                           UPDATE ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           NIL operation } } } } }
         { IF_LEFT
             { IF_LEFT
                 { IF_LEFT
                     { SWAP ;
                       DUP ;
                       GET 3 ;
                       GET 3 ;
                       SWAP ;
                       DUP ;
                       DUG 3 ;
                       CAR ;
                       CAR ;
                       GET 3 ;
                       DUP 3 ;
                       CAR ;
                       GET ;
                       IF_NONE { PUSH int 155 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Manager does not own this avatar!" ; FAILWITH } ;
                       PUSH nat 0 ;
                       DUP 3 ;
                       GET 3 ;
                       CAR ;
                       DUP 3 ;
                       CDR ;
                       GET ;
                       IF_NONE { PUSH int 159 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Target already has an avatar!" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       DUP ;
                       DUP 7 ;
                       CAR ;
                       DUP ;
                       DUG 2 ;
                       GET ;
                       IF_NONE { PUSH int 163 ; FAILWITH } {} ;
                       UNPAIR ;
                       CDR ;
                       DUP 9 ;
                       CDR ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       SWAP ;
                       UPDATE ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       DUP ;
                       DUP 6 ;
                       CDR ;
                       DUP ;
                       DUG 2 ;
                       GET ;
                       IF_NONE { PUSH int 164 ; FAILWITH } {} ;
                       UNPAIR ;
                       UNPAIR ;
                       CDR ;
                       DUP 9 ;
                       CAR ;
                       PAIR ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       SWAP ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       NONE (pair mutez address) ;
                       DIG 5 ;
                       CAR ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       PAIR }
                     { PUSH nat 0 ;
                       DUP 3 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 113 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       COMPARE ;
                       GT ;
                       IF {} { PUSH string "You do not own an avatar!" ; FAILWITH } ;
                       DUP ;
                       PUSH nat 100 ;
                       SWAP ;
                       COMPARE ;
                       GE ;
                       IF {} { PUSH string "Minimum price is 100 Tez!" ; FAILWITH } ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       SENDER ;
                       PUSH mutez 1000000 ;
                       DIG 6 ;
                       MUL ;
                       PAIR ;
                       SOME ;
                       DIG 5 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 121 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       PAIR } ;
                   NIL operation }
                 { IF_LEFT
                     { DROP ;
                       DUP ;
                       GET 5 ;
                       CAR ;
                       SWAP ;
                       DUP ;
                       DUG 2 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 203 ; FAILWITH } {} ;
                       CAR ;
                       GET 3 ;
                       NOW ;
                       SUB ;
                       COMPARE ;
                       GT ;
                       IF {} { PUSH string "Error: It is too soon to train again!" ; FAILWITH } ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       DUP ;
                       SENDER ;
                       DUP ;
                       DUG 2 ;
                       GET ;
                       IF_NONE { PUSH int 209 ; FAILWITH } {} ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       PUSH nat 1 ;
                       ADD ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SOME ;
                       SWAP ;
                       UPDATE ;
                       DUP ;
                       SENDER ;
                       DUP ;
                       DUG 2 ;
                       GET ;
                       IF_NONE { PUSH int 210 ; FAILWITH } {} ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       CDR ;
                       NOW ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       SWAP ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       NIL operation }
                     { IF_LEFT
                         { PUSH nat 0 ;
                           DUP 3 ;
                           GET 3 ;
                           CAR ;
                           SENDER ;
                           GET ;
                           IF_NONE { PUSH int 169 ; FAILWITH } {} ;
                           CAR ;
                           CAR ;
                           CAR ;
                           COMPARE ;
                           EQ ;
                           IF {} { PUSH string "You already own an avatar!" ; FAILWITH } ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           CAR ;
                           CAR ;
                           CAR ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           MEM ;
                           IF {} { PUSH string "That avatar is not for sale!" ; FAILWITH } ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           CAR ;
                           CAR ;
                           CAR ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 177 ; FAILWITH } {} ;
                           CAR ;
                           AMOUNT ;
                           COMPARE ;
                           EQ ;
                           IF {} { PUSH string "Incorrect price!" ; FAILWITH } ;
                           NIL operation ;
                           DUP 3 ;
                           CAR ;
                           GET 5 ;
                           CONTRACT unit ;
                           IF_NONE { PUSH int 181 ; FAILWITH } {} ;
                           PUSH mutez 1000000 ;
                           PUSH nat 50 ;
                           MUL ;
                           UNIT ;
                           TRANSFER_TOKENS ;
                           CONS ;
                           DUP 3 ;
                           CAR ;
                           CAR ;
                           CAR ;
                           DUP 3 ;
                           GET ;
                           IF_NONE { PUSH int 182 ; FAILWITH } {} ;
                           CDR ;
                           CONTRACT unit ;
                           IF_NONE { PUSH int 182 ; FAILWITH } {} ;
                           PUSH mutez 1000000 ;
                           PUSH nat 50 ;
                           MUL ;
                           DUP 5 ;
                           CAR ;
                           CAR ;
                           CAR ;
                           DUP 5 ;
                           GET ;
                           IF_NONE { PUSH int 182 ; FAILWITH } {} ;
                           CAR ;
                           SUB ;
                           UNIT ;
                           TRANSFER_TOKENS ;
                           CONS ;
                           DUP 3 ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           UNPAIR ;
                           DUP ;
                           DIG 7 ;
                           CAR ;
                           CAR ;
                           GET 3 ;
                           DUP 8 ;
                           GET ;
                           IF_NONE { PUSH int 183 ; FAILWITH } {} ;
                           CAR ;
                           CAR ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 183 ; FAILWITH } {} ;
                           UNPAIR ;
                           UNPAIR ;
                           CDR ;
                           PUSH nat 0 ;
                           PAIR ;
                           PAIR ;
                           PAIR ;
                           SOME ;
                           SWAP ;
                           UPDATE ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           UNPAIR ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           DUP ;
                           DUP 8 ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 184 ; FAILWITH } {} ;
                           UNPAIR ;
                           CDR ;
                           SENDER ;
                           PAIR ;
                           PAIR ;
                           SOME ;
                           SWAP ;
                           UPDATE ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           UNPAIR ;
                           UNPAIR ;
                           DUP ;
                           SENDER ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 185 ; FAILWITH } {} ;
                           UNPAIR ;
                           UNPAIR ;
                           CDR ;
                           DUP 10 ;
                           PAIR ;
                           PAIR ;
                           PAIR ;
                           SOME ;
                           SWAP ;
                           UPDATE ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           UNPAIR ;
                           UNPAIR ;
                           NONE (pair mutez address) ;
                           DIG 6 ;
                           UPDATE ;
                           PAIR ;
                           PAIR ;
                           PAIR ;
                           SWAP }
                         { SWAP ;
                           DUP ;
                           DUG 2 ;
                           CAR ;
                           GET 6 ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           MEM ;
                           IF {} { PUSH string "That equipment doesn't exist!" ; FAILWITH } ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           CAR ;
                           GET 6 ;
                           SWAP ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 194 ; FAILWITH } {} ;
                           GET 6 ;
                           AMOUNT ;
                           COMPARE ;
                           EQ ;
                           IF {} { PUSH string "Incorrect price!" ; FAILWITH } ;
                           SWAP ;
                           UNPAIR ;
                           SWAP ;
                           UNPAIR ;
                           UNPAIR ;
                           DUP ;
                           SENDER ;
                           DUP ;
                           DUG 2 ;
                           GET ;
                           IF_NONE { PUSH int 198 ; FAILWITH } {} ;
                           UNPAIR ;
                           UNPAIR ;
                           CAR ;
                           DIG 8 ;
                           SWAP ;
                           PAIR ;
                           PAIR ;
                           PAIR ;
                           SOME ;
                           SWAP ;
                           UPDATE ;
                           PAIR ;
                           PAIR ;
                           SWAP ;
                           PAIR ;
                           DUP ;
                           CAR ;
                           GET 5 ;
                           CONTRACT unit ;
                           IF_NONE { PUSH int 199 ; FAILWITH } {} ;
                           NIL operation ;
                           SWAP ;
                           AMOUNT ;
                           UNIT ;
                           TRANSFER_TOKENS ;
                           CONS } } } }
             { IF_LEFT
                 { IF_LEFT
                     { SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       DUP ;
                       SENDER ;
                       DUP ;
                       DUG 2 ;
                       GET ;
                       IF_NONE { PUSH int 39 ; FAILWITH } {} ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       CDR ;
                       DIG 8 ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       SOME ;
                       SWAP ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR }
                     { SENDER ;
                       DUP 3 ;
                       GET 3 ;
                       GET 3 ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Error: non manager call" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       DIG 5 ;
                       SOME ;
                       PUSH string "" ;
                       UPDATE ;
                       SWAP ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR } ;
                   NIL operation }
                 { IF_LEFT
                     { PUSH nat 0 ;
                       DUP 3 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 139 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       COMPARE ;
                       GT ;
                       IF {} { PUSH string "You do not own an avatar!" ; FAILWITH } ;
                       PUSH nat 0 ;
                       DUP 3 ;
                       GET 3 ;
                       CAR ;
                       DUP 3 ;
                       GET ;
                       IF_NONE { PUSH int 143 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       COMPARE ;
                       EQ ;
                       IF {} { PUSH string "Target already has an avatar!" ; FAILWITH } ;
                       SWAP ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       DUP ;
                       SENDER ;
                       DUP ;
                       DUG 2 ;
                       GET ;
                       IF_NONE { PUSH int 148 ; FAILWITH } {} ;
                       UNPAIR ;
                       UNPAIR ;
                       CDR ;
                       PUSH nat 0 ;
                       PAIR ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       SWAP ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       DUP ;
                       DIG 7 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 147 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       DUP ;
                       DUG 2 ;
                       GET ;
                       IF_NONE { PUSH int 149 ; FAILWITH } {} ;
                       UNPAIR ;
                       CDR ;
                       DUP 9 ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       SWAP ;
                       UPDATE ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       PAIR ;
                       PAIR ;
                       DUP ;
                       DUG 2 ;
                       UNPAIR ;
                       SWAP ;
                       UNPAIR ;
                       UNPAIR ;
                       DUP ;
                       DIG 5 ;
                       DUP ;
                       DUG 2 ;
                       GET ;
                       IF_NONE { PUSH int 150 ; FAILWITH } {} ;
                       UNPAIR ;
                       UNPAIR ;
                       CDR ;
                       DIG 8 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 147 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       PAIR ;
                       PAIR ;
                       PAIR ;
                       SOME ;
                       SWAP ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       SWAP ;
                       PAIR ;
                       DUP ;
                       UNPAIR ;
                       UNPAIR ;
                       UNPAIR ;
                       NONE (pair mutez address) ;
                       DIG 5 ;
                       GET 3 ;
                       CAR ;
                       SENDER ;
                       GET ;
                       IF_NONE { PUSH int 147 ; FAILWITH } {} ;
                       CAR ;
                       CAR ;
                       CAR ;
                       UPDATE ;
                       PAIR ;
                       PAIR ;
                       PAIR ;
                       NIL operation }
                     { IF_LEFT
                         { DUP ;
                           ITER { DIG 2 ; DUP ; GET 8 ; DUP 3 ; CDR ; SOME ; DIG 3 ; CAR ; CAR ; UPDATE ; UPDATE 8 ; SWAP } ;
                           DROP ;
                           NIL operation }
                         { DROP ;
                           DUP ;
                           GET 3 ;
                           GET 3 ;
                           SENDER ;
                           COMPARE ;
                           EQ ;
                           IF
                             {}
                             { PUSH string "WrongCondition: self.data.manager == sp.sender" ;
                               FAILWITH } ;
                           DUP ;
                           GET 3 ;
                           GET 3 ;
                           CONTRACT unit ;
                           IF_NONE { PUSH int 215 ; FAILWITH } {} ;
                           NIL operation ;
                           SWAP ;
                           BALANCE ;
                           UNIT ;
                           TRANSFER_TOKENS ;
                           CONS } } } } } ;
       NIL operation ;
       SWAP ;
       ITER { CONS } ;
       PAIR }